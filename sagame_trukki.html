<!DOCTYPE html>
<html>
<head>

	<meta charset="UTF-8">
	<link type="text/css" rel="stylesheet" href="sagame_fl2016.css" />
	<title> Freebike game </title>

    
    <link href="http://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet" type="text/css" />
    
	<script language="javascript" type="text/javascript" src="js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="js/Dexie.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/FileSaver.js"></script>
    <script language="javascript" type="text/javascript" src="js/common.js"></script>
    <script language="javascript" type="text/javascript" src="js/markerlib.js"></script>
    <script language="javascript" type="text/javascript" src="js/sagame.js"></script>
	<script language="javascript" type="text/javascript">
    
        function setupInteractionFL2016() {
    
            $("#selectGameAB").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.AB; // default behaviour
            });

            $("#selectGameC").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.C; // default behaviour
            });

            $("#selectGameD1").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.D1; // default behaviour
            });
            
            $("#selectGameD2").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.D2; // default behaviour
            });
            
            $("#selectGameF").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.F; // default behaviour
            });
            
            $("#selectGameOngelmat").click(function() {
                $("#home").hide();
                $("#gameInstructions").show();
                SAGAME.currentClipset = SAGAME.CLIPSETS.Ongelmat; // default behaviour
            });
        }

    
    
        //SAGAME.sagameStyle = 'mc_comment';
        SAGAME.sagameStyle = 'selectone';
        SAGAME.feedback = 'description';
        SAGAME.showMarkers = 0;
        SAGAME.randomizeOrder = 0;
        SAGAME.clipIdLength = 11;
        
        var search = window.location.search;
        if (search[0] == '?') { search = search.slice(1); } // Firefox can't handle leading ? 
        const params = new URLSearchParams(search);
        // sagame_clipsets_rsos2016.json
        // var clipsets_json = 'js/sagame_clipsets_trukki.json';
        // var targets_json = 'js/sagame_targets_trukki.json';
        // var clipsets_json = 'js/fl2016_clipsets_20161219.json';
        // var targets_json = 'js/fl2016_targets_20161219.json';

        //var clipsets_json = 'js/trukki_f_alkuiset_clipsets_20170209.json';
        //var targets_json = 'js/trukki_f_alkuiset_targets_20160209.json';
        
        //var clipsets_json = 'js/trukki_clipsets_a_ja_b_alkuiset_20160314.json';
        //var targets_json = 'js/trukki_targets_a_ja_b_alkuiset_20160314.json';
        
        var clipsets_json = 'js/fl2016_clipsets_20170327.json';
        var targets_json = 'js/fl2016_targets_20170327.json';
        
        
        
        console.log( params.has('clipsets') );
        
        if (params.has('clipsets')) {
            console.log("clipsets got");
            clipsets_json = 'js/' + params.get("clipsets");
        }
        if (params.has('targets')) {
            targets_json = 'js/' + params.get("targets");
        }
        console.log(clipsets_json)
        console.log(targets_json)
        
		$(document).ready(function() {
            console.log("0");
            var req1 = loadClipsetsFrom(clipsets_json);
            console.log("1");
            
            req1.done( function() { 
                var req2 = loadTargetsFrom(targets_json);
                
                req2.done( function() { 
                    
                    setupInteraction();
                    setupInteractionFL2016(); 
                    
                }).fail(function(err) {
                    console.log("Loading targets failed")
                    console.log(err);
                });
            }).fail(function(err) {
                console.log("Loading clipsets failed")
                console.log(err);
            });
        });
    </script>

</head>

<body>

    <div id="login" class="instructions">
        
        <p>
        Anna pelaajatunnuksesi <input id="playerId" type="text" value="" />
        </p>
        
        <p>
        <button id="loginButton">Aloita</button>
        
        
        <!-- <button id="showGameInstructions">Aloita</button> -->
        </p>

    </div>

    <div id="home" class="instructions">
        <p>
        <button id="showPracticeInstructions">Harjoittele</button>
        </p>

        <p><button id="selectGameAB">Pelaa A ja B</button></p>
        <p><button id="selectGameC">Pelaa C</button></p>
        <p><button id="selectGameD1">Pelaa D1</button></p>
        <p><button id="selectGameD2">Pelaa D2</button></p>
        <p><button id="selectGameF">Pelaa F</button></p>
        <p><button id="selectGameOngelmat">Ongelmat</button></p>

    </div>

    
    </div>

    <div id="endInstructions" class="instructions">
        <p>Hienoa! Pelasit kaikki videot.</p>
    </div>

    


    <div id="gameInstructions" class="instructions">
        <p>Pelissä näet videoita trukinkuljettajan näkökulmasta. <br /><br />
        Jossain vaiheessa video pysähtyy ja kuva muuttuu harmaaksi. <br /><br />
        Harmaalla taustalla on ympyröitä.<br /><br /> 
        Valitse ympyröistä se jonka kohdalla 
        oli turvallisuuden kannalta tärkein huomioitava tai varottava asia. 
        
        </p>
        <br />
        <button id="startGame">Pelaa</button>
    </div>

    <!-- This should not be here. -->
    <div id="calibrationInstruction" class="instructions">        
        <p>Tässä välissä kalibroidaan silmänliikekamera</p>
        <p><br /><br /></p>
        <p><button id="calibrationInstructionContinue">Jatka</button></p>
    </div>

    <div id="currentvideo"></div>

    <div class="target" id="target_template"></div>	

    <div id="screen">
        <div id="points"><p>Pisteet 0</p></div>
        <video id="videoplayer" src="" muted></video> 
    </div>

    <div id="videoMask"></div>

    <button id="checkbutton">Tarkista</button> 
    <button id="nextbutton">Seuraava</button>
    
    
    <div class="query_feedback" id="query_feedback_template"></div>
	<div class="query_box" id="query_box_template"></div>
    <div class="query_multiple_choice" id="query_multiple_choice_template"></div>

    <!--
    <div id="mc_comment_box" class="mc_comment_box">
    
        <p id="mc_item_template_1">
            <input type="radio" name="mcItem1_selected" /><span id="mcItem1_text">RAi 1</span>
        </p>
        
        <p id="mc_item_template_2">
            <input type="radio" name="mcItem2_selected" /><span id="mcItem2_text">RAi 2</span>
        </p>
        
        <p id="mc_item_template_3">
            <input type="radio" name="mcItem3_selected" /><span id="mcItem3_text">Rai 3</span>
        </p>
    
    </div>
    -->
        
    
    <audio id="targethitplayer" src="media/targethit.mp3"></audio>
    <audio id="missplayer" src="media/188039__antumdeluge__bicycle-horn.wav"></audio>
    
    <img id="marker1" src="media/marker1.png" />
    <img id="marker2" src="media/marker2.png" />
    <img id="marker3" src="media/marker3.png" />
    <img id="marker4" src="media/marker4.png" />
    
    
</body>
</html>
